<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>GPA</title>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <script type="text/javascript">
            var enterSubMsg = "Please enter subject";
            var enterGradeMsg = "Please enter the grade";
            var enterCred = "No.of units of the subject";
            var sub = "Enter Sub";
            var grade = "Enter Grades";
            var units = "Enter Units";
            var invalidGrade = -1;
            var arrayOfCourse = new Array();

            function startCalculation (params) {
                var keepRunning = true;
                var subRead;
                var gradeRead;
                var credRead;
                var readMore = true;

                while (readMore ) {
                    if ((subRead = readInput(enterSubMsg, sub)) &&
                    (gradeRead = readInput(enterGradeMsg, grade)) &&
                    (credRead = readInput(enterCred, units))) {

                        var points = convertGradeToPoints(gradeRead);
                        if (points === invalidGrade) {
                            readMore = false;
                            break;
                        }
                        var numCredit = parseInt(credRead, 10);

                        if (isNaN(numCredit)) {
                            readMore = false;
                            break;
                        }

                        if (readMore) {
                            arrayOfCourse.push({sub:subRead,
                                                points:points,
                                                units:numCredit});
                        }
                    } else {
                        readMore = false;
                    }
                }

                showResults();
            }

            function convertGradeToPoints(grade) {
                var point = invalidGrade;
                var gradeToFind = grade && grade.toLowerCase();

                switch (gradeToFind) {
                    case "a":
                        point = 4.00;
                        break;
                    case "b+":
                        point = 3.5;
                        break;
                    case "b":
                        point = 3.00;
                        break;
                    case "c+":
                        point = 2.5;
                        break;
                    case "c":
                        point = 2.00;
                        break;
                    case "d":
                        point = 1.00;
                        break;
                    case "f":
                    case "af":
                    case "wf":
                        point = 0.0;
                        break;
                }
                return point;
            };

            function showResults() {
                var result = document.getElementById("result");
                var details = '<ul class="noList">';
                var totalHours = 0;
                var totalPoints = 0;
                if (arrayOfCourse.length > 0) {
                    details += '<li> <div class="key"> Courses</div> <div class="key">Grade</div><div class="key">Units</div></li>';
                    for (var i = 0; i <arrayOfCourse.length; i++) {
                        totalHours += arrayOfCourse[i].units;
                        totalPoints += (arrayOfCourse[i].points *  arrayOfCourse[i].units);
                        details += "<li>";
                            details += '<div class="keyValue">' + arrayOfCourse[i].sub + '</div>' +
                                    '<div class="keyValue">' + arrayOfCourse[i].points + '</div>' +
                                    '<div class="keyValue">' + arrayOfCourse[i].units + '</div>' ;
                        details += "</li>";
                    }
                    var GPA = totalPoints / totalHours;
                    details += '</ul>';
                    details += '<div>Total grade points ' + totalPoints +'</div> </br>';
                    details += '<div>Number of hours ' + totalHours +'</div>  </br>';
                    details += '<div>GPA = ' + parseFloat(GPA).toFixed(2)  + '</div>';
                    result.innerHTML = details;
                }
            }

            function readInput(msg, toCompareWith) {
                var res = prompt(msg, toCompareWith);
                if (res !== "" && res !== toCompareWith) {
                   return res;
                }
                return false;
            }
        </script >
    </head>
    <body>
    <div class="wrapper">
        <button onclick="startCalculation()">Calculate Grade</button>
        <div id="result"></div>
    </div>
    </body>
</html>


